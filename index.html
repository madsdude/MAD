<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Måltidsplanlægger</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #4CAF50;
      color: white;
      padding: 15px;
      text-align: center;
    }
    .container {
      padding: 20px;
    }
    .recipe-list, .shopping-list {
      margin: 20px 0;
    }
    .recipe-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .recipe-item {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    .recipe-item img {
      width: 100%;
      height: auto;
    }
    .shopping-list ul {
      list-style-type: none;
      padding: 0;
    }
    .shopping-list img {
      width: 30px;
      height: 30px;
      margin-right: 10px;
    }
    input, button {
      margin: 5px;
      padding: 10px;
    }
    .filters {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Måltidsplanlægger</h1>
  </header>
  <div class="container">
    <h2>Filtrering og Kategorier</h2>
    <div class="filters">
      <input type="text" id="search" placeholder="Søg efter opskrift" onkeyup="filterRecipes()">
      <select id="category-filter" onchange="filterRecipes()">
        <option value="">Alle kategorier</option>
        <option value="Kød">Kød</option>
        <option value="Vegetarisk">Vegetarisk</option>
        <option value="Hurtige måltider">Hurtige måltider</option>
      </select>
    </div>

    <h2>Opskrifter</h2>
    <div class="recipe-list" id="recipe-list">
      <!-- Opskrifter vil blive tilføjet her dynamisk -->
    </div>

    <h2>Indkøbsliste</h2>
    <div class="shopping-list" id="shopping-list">
      <ul id="shopping-items">
        <!-- Indkøbsliste vil blive tilføjet her dynamisk -->
      </ul>
      <button onclick="exportShoppingList()">Eksporter til PDF</button>
    </div>
  </div>

  <script>
    // Central ingrediensliste med billeder
    const ingredientImages = {
      "Kartofler": "https://via.placeholder.com/30",
      "Agurk": "https://via.placeholder.com/30",
      "Briocheboller": "https://via.placeholder.com/30",
      "Hakket oksekød": "https://via.placeholder.com/30",
      "Bacon skiver": "https://via.placeholder.com/30",
      "Peberfrugt": "https://via.placeholder.com/30",
      "Purløg": "https://via.placeholder.com/30",
      "Kyllingebryst": "https://via.placeholder.com/30",
      "Spinat": "https://via.placeholder.com/30",
      "Gulerod": "https://via.placeholder.com/30",
      "Små tortillas": "https://via.placeholder.com/30",
      "Pak choi": "https://via.placeholder.com/30",
      "Lime": "https://via.placeholder.com/30",
      "Hakket svinekød": "https://via.placeholder.com/30",
      "Chiliflager": "https://via.placeholder.com/30",
      "Hvidløgsfløde": "https://via.placeholder.com/30",
      "Asiatisk woksauce": "https://via.placeholder.com/30",
      "Srirachamayonnaise": "https://via.placeholder.com/30",
      "Plantefars": "https://via.placeholder.com/30"
    };

    let recipes = [
      {
        name: "Saftig bacon-cheeseburger",
        ingredients: ["Kartofler", "Agurk", "Briocheboller", "Hakket oksekød", "Bacon skiver"],
        image: "https://via.placeholder.com/150",
        category: "Kød",
        favorite: false
      },
      {
        name: "Pandestegt kyllingebryst",
        ingredients: ["Peberfrugt", "Purløg", "Kyllingebryst", "Spinat"],
        image: "https://via.placeholder.com/150",
        category: "Kød",
        favorite: false
      },
      {
        name: "Asiatiske svine- og kålwraps",
        ingredients: ["Gulerod", "Små tortillas", "Pak choi", "Lime", "Hakket svinekød"],
        image: "https://via.placeholder.com/150",
        category: "Kød",
        favorite: false
      },
      {
        name: "Hurtige asiatiske vegetartacos",
        ingredients: ["Chiliflager", "Hvidløgsfløde", "Asiatisk woksauce", "Srirachamayonnaise", "Plantefars", "Pak choi"],
        image: "https://via.placeholder.com/150",
        category: "Vegetarisk",
        favorite: false
      }
    ];

    const shoppingList = {};

    function displayRecipes(filteredRecipes = recipes) {
      const recipeList = document.getElementById('recipe-list');
      recipeList.innerHTML = '';
      filteredRecipes.forEach((recipe, index) => {
        const recipeItem = document.createElement('div');
        recipeItem.className = 'recipe-item';
        recipeItem.innerHTML = `
          <img src="${recipe.image}" alt="${recipe.name}">
          <h3>${recipe.name}</h3>
          <p>Ingredienser: ${recipe.ingredients.join(', ')}</p>
          <button onclick="addToShoppingList(${index})">Tilføj til indkøbsliste</button>
          <button onclick="toggleFavorite(${index})">${recipe.favorite ? '★' : '☆'}</button>
        `;
        recipeList.appendChild(recipeItem);
      });
    }

    function filterRecipes() {
      const search = document.getElementById('search').value.toLowerCase();
      const category = document.getElementById('category-filter').value;
      const filteredRecipes = recipes.filter(recipe =>
        recipe.name.toLowerCase().includes(search) &&
        (category === '' || recipe.category === category)
      );
      displayRecipes(filteredRecipes);
    }

    function addToShoppingList(index) {
      const ingredients = recipes[index].ingredients;
      ingredients.forEach(ingredient => {
        if (!shoppingList[ingredient]) {
          shoppingList[ingredient] = { count: 0, image: ingredientImages[ingredient] };
        }
        shoppingList[ingredient].count++;
      });
      updateShoppingList();
    }

    function updateShoppingList() {
      const shoppingItems = document.getElementById('shopping-items');
      shoppingItems.innerHTML = '';
      for (const item in shoppingList) {
        const listItem = document.createElement('li');
        listItem.innerHTML = `<img src="${shoppingList[item].image}" alt="${item}">${item} (${shoppingList[item].count})`;
        shoppingItems.appendChild(listItem);
      }
    }

    displayRecipes();
  </script>
</body>
</html>
